<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/style.css">
    <title>Face Recognition</title>
</head>
<body>
    <video autoplay loop muted plays-inline class="bgvideo">
        <source src="/static/bgvideo.mp4" type="video/mp4">
    </video>
    <section class="parent">
        <section class="child">
            <h1>PERSON<br>
            IDENTIFIER</h1>
            <p>Person identification using face recognition is a cutting-edge biometric technology that involves the automated detection and identification of individuals based on their facial characteristics. It begins with the detection of faces in images or video frames, followed by the extraction of unique facial features. These features are then compared with pre-registered facial templates stored in a database. Through sophisticated algorithms, the system matches the extracted features with the stored templates to identify individuals accurately. This technology finds widespread applications in security systems, access control, identity verification, and surveillance, revolutionizing various industries with its speed, accuracy, and convenience.</p>
        </section>
        <div>
            <section class="child1">
                <video id="video_feed" width="300" height="300" autoplay class="vc"></video>
                <br>
                <form id="image_form" enctype="multipart/form-data">
                    <input type="file" id="image" name="image" accept="image/*">
                    <button type="submit" class="but">Select Image</button>
                    <button type="button" id="capture_button" class="but">Capture Photo</button>
                </form>
            </section>
        </div>
    </section>
    <button onclick="window.location.href='/register'" class="but4">Register your details here</button>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const video = document.getElementById('video_feed');

            // Get video stream from webcam
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(function(stream) {
                    video.srcObject = stream;
                })
                .catch(function(error) {
                    console.error('Error accessing webcam:', error);
                });

            // Bind submit event to the form
            const imageForm = document.getElementById('image_form');
            imageForm.addEventListener('submit', function(event) {
                event.preventDefault(); // Prevent form submission
                const formData = new FormData(this);
                const base64Image = formData.get('image');
                if (base64Image) {
                    previewImage(base64Image);
                }
            });

            // Function to preview selected image
            function previewImage(base64Image) {
                const preview = document.querySelector('img');
                preview.src = base64Image;
            }

            // Bind click event to capture button
            const captureButton = document.getElementById('capture_button');
            captureButton.addEventListener('click', function() {
                capturePhoto();
            });

            // Function to capture photo
            function capturePhoto() {
                // Capture frame from video stream
                const canvas = document.createElement('canvas');
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                const ctx = canvas.getContext('2d');
                ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

                // Convert canvas content to base64 image
                const base64Image = canvas.toDataURL('image/jpeg');

                // Preview the captured photo
                previewImage(base64Image);
            }
        });
    </script>
</body>
</html>
